(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{524:function(e,r,a){"use strict";a.r(r);var t=a(6),o=Object(t.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("目录")]),e._v(" "),r("p",[r("a",{attrs:{href:"#_1-%E8%A1%A8%E7%BB%93%E6%9E%84"}},[e._v("1. 表结构")])]),e._v(" "),r("p",[r("a",{attrs:{href:"#_2-%E7%B4%A0%E6%9D%90%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2"}},[e._v("2. 素材管理界面")])]),e._v(" "),r("p",[r("a",{attrs:{href:"#_3-%E6%B0%B8%E4%B9%85%E7%B4%A0%E6%9D%90"}},[e._v("3. 永久素材")])]),e._v(" "),r("p",[r("a",{attrs:{href:"#_4-%E4%B8%B4%E6%97%B6%E7%B4%A0%E6%9D%90"}},[e._v("4. 临时素材")])]),e._v(" "),r("h1",{attrs:{id:"公众号素材"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#公众号素材"}},[e._v("#")]),e._v(" "),r("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==",alt:"null"}}),e._v("公众号素材")]),e._v(" "),r("p",[e._v("本章节，讲解公众号素材的相关内容，包括图片、语音、视频素材，不包括图文素材。对应 [公众号管理 -> 素材管理] 菜单，如下图所示：")]),e._v(" "),r("p",[r("img",{attrs:{src:"/note-doc/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B4%A0%E6%9D%90/%E7%95%8C%E9%9D%A2.png",alt:"界面"}})]),e._v(" "),r("p",[e._v("在配置公众号的自动回复、菜单的自动回复、主动给用户发送消息时，都可以使用素材。")]),e._v(" "),r("h2",{attrs:{id:"_1-表结构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-表结构"}},[e._v("#")]),e._v(" 1. 表结构")]),e._v(" "),r("p",[e._v("公众号素材对应  "),r("code",[e._v("mp_material")]),e._v("  表，结构如下图所示：")]),e._v(" "),r("p",[r("img",{attrs:{src:"/note-doc/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B4%A0%E6%9D%90/%E8%A1%A8%E7%BB%93%E6%9E%84.png",alt:"表结构"}})]),e._v(" "),r("p",[e._v("①  "),r("code",[e._v("type")]),e._v("  字段：素材类型。对应微信的素材类型，包括  "),r("code",[e._v("image")]),e._v("  图片、 "),r("code",[e._v("voice")]),e._v("  语音、 "),r("code",[e._v("video")]),e._v("  视频。")]),e._v(" "),r("p",[e._v("②  "),r("code",[e._v("media_id")]),e._v("  字段：素材的媒体编号，对应微信公众号的 media_id。")]),e._v(" "),r("p",[e._v("③  "),r("code",[e._v("permanent")]),e._v("  字段：是否永久。 "),r("code",[e._v("true")]),e._v("  代表 "),r("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Asset_Management/Adding_Permanent_Assets.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("永久素材 "),r("OutboundLink")],1),e._v("， "),r("code",[e._v("false")]),e._v("  代表 "),r("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Asset_Management/New_temporary_materials.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("临时素材 "),r("OutboundLink")],1),e._v("。")]),e._v(" "),r("p",[e._v("④  "),r("code",[e._v("mp_url")]),e._v("  字段：公众号存储素材的 URL 地址，有且仅有永久素材才有。")]),e._v(" "),r("p",[e._v("⑤  "),r("code",[e._v("url")]),e._v("  字段：存储在自己文件服务器上的 URL 地址，解决临时素材只在微信服务器上保存 3 天的问题，也解决图片素材的  "),r("code",[e._v("mp_url")]),e._v("  无法在自己管理后台显示的问题。")]),e._v(" "),r("h2",{attrs:{id:"_2-素材管理界面"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-素材管理界面"}},[e._v("#")]),e._v(" 2. 素材管理界面")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("前端："),r("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/material/index.vue",target:"_blank",rel:"noopener noreferrer"}},[e._v("/@views/mp/material "),r("OutboundLink")],1)])]),e._v(" "),r("li",[r("p",[e._v("后端："),r("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/material/MpMaterialController.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("MpMaterialController "),r("OutboundLink")],1)])])]),e._v(" "),r("h2",{attrs:{id:"_3-永久素材"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-永久素材"}},[e._v("#")]),e._v(" 3. 永久素材")]),e._v(" "),r("blockquote",[r("p",[e._v("对应 "),r("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Asset_Management/Adding_Permanent_Assets.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("《微信公众号官方文档 —— 永久素材》 "),r("OutboundLink")],1),e._v(" 文档。")])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/material/MpMaterialController.java#L40-L47",target:"_blank",rel:"noopener noreferrer"}},[e._v("MpMaterialController "),r("OutboundLink")],1),e._v(" 的  "),r("code",[e._v("uploadPermanentMaterial")]),e._v("  方法对应的接口，实现了上传【永久】素材到公众号。如下图所示：")]),e._v(" "),r("p",[r("img",{attrs:{src:"/note-doc/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B4%A0%E6%9D%90/%E4%B8%8A%E4%BC%A0%E6%B0%B8%E4%B9%85%E7%B4%A0%E6%9D%90.png",alt:"上传永久素材"}})]),e._v(" "),r("h2",{attrs:{id:"_4-临时素材"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-临时素材"}},[e._v("#")]),e._v(" 4. 临时素材")]),e._v(" "),r("blockquote",[r("p",[e._v("对应 "),r("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/Asset_Management/New_temporary_materials.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("《微信公众号官方文档 —— 临时素材》 "),r("OutboundLink")],1),e._v(" 文档。")])]),e._v(" "),r("p",[e._v("① 来源一：主动发送客服消息给用户时，如果是图片、语音、视频素材，需要先上传到微信服务器，获得到  "),r("code",[e._v("media_id")]),e._v("  后，才能发送给用户。")]),e._v(" "),r("p",[e._v("此时，可调用 "),r("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/material/MpMaterialController.java#L31-L38",target:"_blank",rel:"noopener noreferrer"}},[e._v("MpMaterialController "),r("OutboundLink")],1),e._v(" 的  "),r("code",[e._v("uploadTemporaryMaterial")]),e._v("  方法对应的接口，实现了上传【临时】素材到公众号。如下图所示：")]),e._v(" "),r("p",[r("img",{attrs:{src:"/note-doc/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B4%A0%E6%9D%90/%E4%B8%8A%E4%BC%A0%E4%B8%B4%E6%97%B6%E7%B4%A0%E6%9D%90.png",alt:"上传临时素材"}})]),e._v(" "),r("p",[e._v("② 来源二：在接收到用户消息时，如果是图片、语音、视频素材，需要先下载到自己的文件服务器上，避免超过 3 天后无法访问的问题。如下图所示：")]),e._v(" "),r("p",[r("img",{attrs:{src:"/note-doc/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B4%A0%E6%9D%90/%E4%B8%8B%E8%BD%BD%E4%B8%B4%E6%97%B6%E7%B4%A0%E6%9D%90.png",alt:"下载临时素材"}})])])}),[],!1,null,null,null);r.default=o.exports}}]);