(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{440:function(a,t,s){"use strict";s.r(t);var n=s(7),e=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("组件 "),t("strong",[a._v("myapp-common-datasource")]),a._v("，基于 "),t("code",[a._v("Mybatis")]),a._v(" + "),t("code",[a._v("Dynamic Datasource")]),a._v(" + "),t("code",[a._v("Mybatis Plus")]),a._v(" + "),t("code",[a._v("Pagehelper")]),a._v(" + "),t("code",[a._v("Seata")]),a._v(" 功能封装。")]),a._v(" "),t("h2",{attrs:{id:"使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[a._v("#")]),a._v(" 使用")]),a._v(" "),t("h3",{attrs:{id:"微服务模块引入依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#微服务模块引入依赖"}},[a._v("#")]),a._v(" 微服务模块引入依赖：")]),a._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[a._v("        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n           "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("com.myapp"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n           "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("myapp-common-datasource"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n       "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h3",{attrs:{id:"创建数据库实体"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库实体"}},[a._v("#")]),a._v(" 创建数据库实体")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@TableName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"oa_model_group"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Accessors")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("chain "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Data")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@ToString")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@TenantSchema")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("OaModelGroup")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n     * 说明：\n     * 字段：id\n     * 类型：bigint\n     */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@TableId")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Long")]),a._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n     * 说明：创建时间\n     * 字段：create_time\n     * 类型：bigint\n     */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@TableField")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("fill "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("FieldFill")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("INSERT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Long")]),a._v(" createTime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n     * 说明：最后更新人\n     * 字段：operator\n     * 类型：bigint\n     */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@TableField")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("fill "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("FieldFill")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("INSERT_UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Long")]),a._v(" operator"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n     * 说明：创建人\n     * 字段：creator\n     * 类型：bigint\n     */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@TableField")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("fill "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("FieldFill")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("INSERT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Long")]),a._v(" creator"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n     * 说明：分组名\n     * 字段：name\n     * 类型：varchar\n     */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n     * 说明：排序\n     * 字段：sort\n     * 类型：int\n     */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Integer")]),a._v(" sort"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n     * 说明：\n     * 字段：update_time\n     * 类型：bigint\n     */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@TableField")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("fill "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("FieldFill")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("INSERT_UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Long")]),a._v(" updateTime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n     * 说明：是否删除\n     * 字段：is_delete\n     * 类型：tinyint\n     */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Integer")]),a._v(" isDelete"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n     * 说明：租户\n     * 字段：tenant_id\n     * 类型：bigint\n     */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@TableField")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("fill "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("FieldFill")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("INSERT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Long")]),a._v(" tenantId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br"),t("span",{staticClass:"line-number"},[a._v("28")]),t("br"),t("span",{staticClass:"line-number"},[a._v("29")]),t("br"),t("span",{staticClass:"line-number"},[a._v("30")]),t("br"),t("span",{staticClass:"line-number"},[a._v("31")]),t("br"),t("span",{staticClass:"line-number"},[a._v("32")]),t("br"),t("span",{staticClass:"line-number"},[a._v("33")]),t("br"),t("span",{staticClass:"line-number"},[a._v("34")]),t("br"),t("span",{staticClass:"line-number"},[a._v("35")]),t("br"),t("span",{staticClass:"line-number"},[a._v("36")]),t("br"),t("span",{staticClass:"line-number"},[a._v("37")]),t("br"),t("span",{staticClass:"line-number"},[a._v("38")]),t("br"),t("span",{staticClass:"line-number"},[a._v("39")]),t("br"),t("span",{staticClass:"line-number"},[a._v("40")]),t("br"),t("span",{staticClass:"line-number"},[a._v("41")]),t("br"),t("span",{staticClass:"line-number"},[a._v("42")]),t("br"),t("span",{staticClass:"line-number"},[a._v("43")]),t("br"),t("span",{staticClass:"line-number"},[a._v("44")]),t("br"),t("span",{staticClass:"line-number"},[a._v("45")]),t("br"),t("span",{staticClass:"line-number"},[a._v("46")]),t("br"),t("span",{staticClass:"line-number"},[a._v("47")]),t("br"),t("span",{staticClass:"line-number"},[a._v("48")]),t("br"),t("span",{staticClass:"line-number"},[a._v("49")]),t("br"),t("span",{staticClass:"line-number"},[a._v("50")]),t("br"),t("span",{staticClass:"line-number"},[a._v("51")]),t("br"),t("span",{staticClass:"line-number"},[a._v("52")]),t("br"),t("span",{staticClass:"line-number"},[a._v("53")]),t("br"),t("span",{staticClass:"line-number"},[a._v("54")]),t("br"),t("span",{staticClass:"line-number"},[a._v("55")]),t("br"),t("span",{staticClass:"line-number"},[a._v("56")]),t("br"),t("span",{staticClass:"line-number"},[a._v("57")]),t("br"),t("span",{staticClass:"line-number"},[a._v("58")]),t("br"),t("span",{staticClass:"line-number"},[a._v("59")]),t("br"),t("span",{staticClass:"line-number"},[a._v("60")]),t("br"),t("span",{staticClass:"line-number"},[a._v("61")]),t("br"),t("span",{staticClass:"line-number"},[a._v("62")]),t("br"),t("span",{staticClass:"line-number"},[a._v("63")]),t("br"),t("span",{staticClass:"line-number"},[a._v("64")]),t("br"),t("span",{staticClass:"line-number"},[a._v("65")]),t("br"),t("span",{staticClass:"line-number"},[a._v("66")]),t("br"),t("span",{staticClass:"line-number"},[a._v("67")]),t("br")])]),t("p",[t("code",[a._v("@TableName")]),a._v(" 指定表名称，如果不添加该注解，则默认为类名下划线拼接。\n"),t("code",[a._v("@TenantSchema")]),a._v(" 租户模式表，详情请查看"),t("a",{attrs:{href:"/dev/server/saas-tenant"}},[a._v("后端手册-多租户模式")]),a._v(" "),t("code",[a._v("@TableId")]),a._v(" 必须指定 tableId, 否则 Mybatis plus 使用错误。\n"),t("code",[a._v("id")]),a._v(" "),t("strong",[a._v("默认")]),a._v("采用 Snowflake 雪花算法。\n"),t("code",[a._v("@TableField")]),a._v(" 默认通过 "),t("code",[a._v("DefaultDBFieldHandler")]),a._v(" 进行 set 值。")]),a._v(" "),t("h3",{attrs:{id:"创建-mapper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建-mapper"}},[a._v("#")]),a._v(" 创建 Mapper")]),a._v(" "),t("p",[a._v("业务 Mapper 使用 Mybatis plus 需要继承 "),t("code",[a._v("BaseMapperX")]),a._v(" 接口。如下所示：")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Mapper")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("OaModelGroupMapper")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BaseMapperX")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("OaModelGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("注意")]),a._v(" "),t("p",[a._v("在编写数据层模型时，需要遵守项目"),t("RouterLink",{attrs:{to:"/pages/a60284/"}},[a._v("数据层开发规范")])],1)]),a._v(" "),t("h3",{attrs:{id:"复杂-字段类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#复杂-字段类型"}},[a._v("#")]),a._v(" “复杂”字段类型")]),a._v(" "),t("h2",{attrs:{id:"数据库文档生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库文档生成"}},[a._v("#")]),a._v(" 数据库文档生成")]),a._v(" "),t("h2",{attrs:{id:"多数据源使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多数据源使用"}},[a._v("#")]),a._v(" 多数据源使用")]),a._v(" "),t("p",[a._v("多数据源使用请查看 "),t("a",{attrs:{href:"/dev/server/dynamic-datasource"}},[a._v("微服务-多数据源")])]),a._v(" "),t("h2",{attrs:{id:"事务使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事务使用"}},[a._v("#")]),a._v(" 事务使用")]),a._v(" "),t("p",[a._v("事务使用请查看 "),t("RouterLink",{attrs:{to:"/pages/fe3ddc/"}},[a._v("微服务-分布式事务")])],1),a._v(" "),t("h2",{attrs:{id:"分页处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分页处理"}},[a._v("#")]),a._v(" 分页处理")]),a._v(" "),t("p",[a._v("分页请查看 "),t("RouterLink",{attrs:{to:"/pages/ce0367/"}},[a._v("后端手册-列表分页")])],1),a._v(" "),t("h3",{attrs:{id:"_1-2-逻辑删除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-逻辑删除"}},[a._v("#")]),a._v(" 1.2 逻辑删除")]),a._v(" "),t("p",[a._v("所有表通过  "),t("code",[a._v("deleted")]),a._v("  字段来实现逻辑删除，值为 0 表示未删除，值为 1 表示已删除，可见  "),t("code",[a._v("application.yaml")]),a._v("  配置文件的  "),t("code",[a._v("logic-delete-value")]),a._v("  和  "),t("code",[a._v("logic-not-delete-value")]),a._v("  配置项。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/03.png",alt:"逻辑删除的配置"}})]),a._v(" "),t("p",[a._v("① 所有 SELECT 查询，都会自动拼接  "),t("code",[a._v("WHERE deleted = 0")]),a._v("  查询条件，过滤已经删除的记录。如果被删除的记录，只能通过在 XML 或者  "),t("code",[a._v("@SELECT")]),a._v("  来手写 SQL 语句。例如说：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/04.png",alt:"不自动过滤逻辑删除"}})]),a._v(" "),t("p",[a._v("② 建立唯一索引时，需要额外增加  "),t("code",[a._v("delete_time")]),a._v("  字段，添加到唯一索引字段中，避免唯一索引冲突。例如说， "),t("code",[a._v("system_users")]),a._v("  使用  "),t("code",[a._v("username")]),a._v("  作为唯一索引：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("未添加前：先逻辑删除了一条  "),t("code",[a._v("username = yudao")]),a._v("  的记录，然后又插入了一条  "),t("code",[a._v("username = yudao")]),a._v("  的记录时，会报索引冲突的异常。")])]),a._v(" "),t("li",[t("p",[a._v("已添加后：先逻辑删除了一条  "),t("code",[a._v("username = yudao")]),a._v("  的记录并更新  "),t("code",[a._v("delete_time")]),a._v("  为当前时间，然后又插入一条  "),t("code",[a._v("username = yudao")]),a._v("  并且  "),t("code",[a._v("delete_time")]),a._v("  为 0 的记录，不会导致唯一索引冲突。")])])]),a._v(" "),t("h3",{attrs:{id:"_1-4-复杂-字段类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-复杂-字段类型"}},[a._v("#")]),a._v(" 1.4 “复杂”字段类型")]),a._v(" "),t("p",[a._v("MyBatis Plus 提供 TypeHandler 字段类型处理器，用于 JavaType 与 JdbcType 之间的转换。示例如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/13.png",alt:"字段处理器的示例"}})]),a._v(" "),t("p",[a._v("常用的字段类型处理器有：")]),a._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://github.com/baomidou/mybatis-plus/blob/a3e121c27cd26cb7c546dfb88190f3b1f574dc38/mybatis-plus-extension/src/main/java/com/baomidou/mybatisplus/extension/handlers/JacksonTypeHandler.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("JacksonTypeHandler "),t("OutboundLink")],1),a._v("：通用的 Jackson 实现 JSON 字段类型处理器。")])]),a._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/type/JsonLongSetTypeHandler.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("JsonLongSetTypeHandler "),t("OutboundLink")],1),a._v("：针对  "),t("code",[a._v("Set<Long>")]),a._v("  的 Jackson 实现 JSON 字段类型处理器。")])])]),a._v(" "),t("p",[a._v("另外，如果你后续要拓展自定义的 TypeHandler 实现，可以添加到 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/type/JsonLongSetTypeHandler.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("cn.iocoder.yudao.framework.mybatis.core.type "),t("OutboundLink")],1),a._v(" 包下。")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("注意事项：")]),a._v(" "),t("p",[a._v("使用 TypeHandler 时，需要设置实体的  "),t("code",[a._v("@TableName")]),a._v("  注解的  "),t("code",[a._v("@autoResultMap = true")]),a._v(" 。")])]),a._v(" "),t("h2",{attrs:{id:"_3-crud-接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-crud-接口"}},[a._v("#")]),a._v(" 3. CRUD 接口")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/mapper/BaseMapperX.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("BaseMapperX "),t("OutboundLink")],1),a._v(" 接口，继承 MyBatis Plus 的 BaseMapper 接口，提供更强的 CRUD 操作能力。")]),a._v(" "),t("h3",{attrs:{id:"_3-1-selectone"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-selectone"}},[a._v("#")]),a._v(" 3.1 selectOne")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/mapper/BaseMapperX.java#L30-L44",target:"_blank",rel:"noopener noreferrer"}},[a._v("#selectOne(...) "),t("OutboundLink")],1),a._v(" 方法，使用指定条件，查询单条记录。示例如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/09.png",alt:"selectOne 示例"}})]),a._v(" "),t("h3",{attrs:{id:"_3-2-selectcount"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-selectcount"}},[a._v("#")]),a._v(" 3.2 selectCount")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/mapper/BaseMapperX.java#L46-L56",target:"_blank",rel:"noopener noreferrer"}},[a._v("#selectCount(...) "),t("OutboundLink")],1),a._v(" 方法，使用指定条件，查询记录的数量。示例如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/10.png",alt:"selectCount 示例"}})]),a._v(" "),t("h3",{attrs:{id:"_3-3-selectlist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-selectlist"}},[a._v("#")]),a._v(" 3.3 selectList")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/mapper/BaseMapperX.java#L58-L76",target:"_blank",rel:"noopener noreferrer"}},[a._v("#selectList(...) "),t("OutboundLink")],1),a._v(" 方法，使用指定条件，查询多条记录。示例如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/11.png",alt:"selectList 示例"}})]),a._v(" "),t("h3",{attrs:{id:"_3-4-selectpage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-selectpage"}},[a._v("#")]),a._v(" 3.4 selectPage")]),a._v(" "),t("p",[a._v("针对 MyBatis Plus 分页查询的二次分装，在 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/mapper/BaseMapperX.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("BaseMapperX "),t("OutboundLink")],1),a._v(" 中实现，目的是使用项目自己的分页封装：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("【入参】查询前，将项目的分页参数 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/pojo/PageParam.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("PageParam "),t("OutboundLink")],1),a._v("，转换成 MyBatis Plus 的 IPage 对象。")])]),a._v(" "),t("li",[t("p",[a._v("【出参】查询后，将 MyBatis Plus 的分页结果 IPage，转换成项目的分页结果 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/pojo/PageResult.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("PageResult "),t("OutboundLink")],1),a._v("。代码如下图：")])])]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E5%88%86%E9%A1%B5%E5%AE%9E%E7%8E%B0/01.png",alt:"BaseMapperX 实现"}})]),a._v(" "),t("p",[a._v("具体的使用示例，可见 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/mysql/tenant/TenantMapper.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("TenantMapper "),t("OutboundLink")],1),a._v(" 类中，定义 selectPage 查询方法。代码如下：")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Mapper")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantMapper")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BaseMapperX")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantDO")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PageResult")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantDO")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("selectPage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantPageReqVO")]),a._v(" reqVO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("selectPage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("reqVO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LambdaQueryWrapperX")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantDO")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n               "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("likeIfPresent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantDO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" reqVO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 如果 name 不为空，则进行 like 查询")]),a._v("\n               "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("likeIfPresent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantDO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getContactName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" reqVO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getContactName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n               "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("likeIfPresent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantDO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getContactMobile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" reqVO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getContactMobile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n               "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("eqIfPresent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantDO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getStatus")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" reqVO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getStatus")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 如果 status 不为空，则进行 = 查询")]),a._v("\n               "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("betweenIfPresent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantDO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getCreateTime")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" reqVO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getBeginCreateTime")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" reqVO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getEndCreateTime")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 如果 create 不为空，则进行 between 查询")]),a._v("\n               "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("orderByDesc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TenantDO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 按照 id 倒序")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n   \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br")])]),t("p",[a._v("完整实战，可见 "),t("a",{attrs:{href:"/page-feature"}},[a._v("《开发指南 —— 分页实现》")]),a._v(" 文档。")]),a._v(" "),t("h3",{attrs:{id:"_3-5-insertbatch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-insertbatch"}},[a._v("#")]),a._v(" 3.5 insertBatch")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/mapper/BaseMapperX.java#L78-L88",target:"_blank",rel:"noopener noreferrer"}},[a._v("#insertBatch(...) "),t("OutboundLink")],1),a._v(" 方法，遍历数组，逐条插入数据库中，适合"),t("strong",[a._v("少量")]),a._v("数据插入，或者对"),t("strong",[a._v("性能要求不高")]),a._v("的场景。 示例如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/12.png",alt:"insertBatch 示例"}})]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("为什么不使用 insertBatchSomeColumn 批量插入？")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("只支持 MySQL 数据库。其它 Oracle 等数据库使用会报错，可见 "),t("a",{attrs:{href:"https://github.com/baomidou/mybatis-plus/blob/a3e121c27cd26cb7c546dfb88190f3b1f574dc38/mybatis-plus-extension/src/main/java/com/baomidou/mybatisplus/extension/injector/methods/InsertBatchSomeColumn.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("InsertBatchSomeColumn "),t("OutboundLink")],1),a._v(" 说明。")])]),a._v(" "),t("li",[t("p",[a._v("未支持多租户。插入数据库时，多租户字段不会进行自动赋值。")])])])]),a._v(" "),t("h2",{attrs:{id:"_4-批量插入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-批量插入"}},[a._v("#")]),a._v(" 4. 批量插入")]),a._v(" "),t("p",[a._v("绝大多数场景下，推荐使用 MyBatis Plus 提供的 IService 的 "),t("a",{attrs:{href:"https://github.com/baomidou/mybatis-plus/blob/34ebdf6ee6/mybatis-plus-extension/src/main/java/com/baomidou/mybatisplus/extension/service/IService.java#L66-L74",target:"_blank",rel:"noopener noreferrer"}},[a._v("#saveBatch() "),t("OutboundLink")],1),a._v(" 方法。示例 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/PermissionServiceImpl.java#L200-L230",target:"_blank",rel:"noopener noreferrer"}},[a._v("PermissionServiceImpl "),t("OutboundLink")],1),a._v(" 如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/14.png",alt:"saveBatch 示例"}})]),a._v(" "),t("h2",{attrs:{id:"_5-条件构造器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-条件构造器"}},[a._v("#")]),a._v(" 5. 条件构造器")]),a._v(" "),t("p",[a._v("继承 MyBatis Plus 的条件构造器，拓展了 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/query/LambdaQueryWrapperX.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("LambdaQueryWrapperX "),t("OutboundLink")],1),a._v(" 和 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/query/QueryWrapperX.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("QueryWrapperX "),t("OutboundLink")],1),a._v(" 类，主要是增加 xxxIfPresent 方法，用于判断值不存在的时候，不要拼接到条件中。例如说：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/15.png",alt:"xxxIfPresent 方法"}})]),a._v(" "),t("p",[a._v("具体的使用示例如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/note-doc/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/16.png",alt:"LambdaQueryWrapperX 使用示例"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);