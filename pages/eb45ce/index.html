<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SpringCloudGateway内置的全局过滤器 | X_SaaS快速开发平台</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/note-doc/img/favicon.ico">
    <meta name="description" content="基于spring cloud alibaba 微服务搭建的快速开发平台">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#fff">
    
    <link rel="preload" href="/note-doc/assets/css/0.styles.e218e477.css" as="style"><link rel="preload" href="/note-doc/assets/js/app.3086d7cc.js" as="script"><link rel="preload" href="/note-doc/assets/js/2.d14532d0.js" as="script"><link rel="preload" href="/note-doc/assets/js/213.fb3e37df.js" as="script"><link rel="prefetch" href="/note-doc/assets/js/10.4a1253f5.js"><link rel="prefetch" href="/note-doc/assets/js/100.e8f88cce.js"><link rel="prefetch" href="/note-doc/assets/js/101.43cf0cee.js"><link rel="prefetch" href="/note-doc/assets/js/102.5d145645.js"><link rel="prefetch" href="/note-doc/assets/js/103.552a3f2e.js"><link rel="prefetch" href="/note-doc/assets/js/104.16a83917.js"><link rel="prefetch" href="/note-doc/assets/js/105.6e27087b.js"><link rel="prefetch" href="/note-doc/assets/js/106.09d11598.js"><link rel="prefetch" href="/note-doc/assets/js/107.12486991.js"><link rel="prefetch" href="/note-doc/assets/js/108.c4c5aa04.js"><link rel="prefetch" href="/note-doc/assets/js/109.5c5a9f08.js"><link rel="prefetch" href="/note-doc/assets/js/11.9fe2c6c8.js"><link rel="prefetch" href="/note-doc/assets/js/110.56ea1efe.js"><link rel="prefetch" href="/note-doc/assets/js/111.a10c4426.js"><link rel="prefetch" href="/note-doc/assets/js/112.7fb2732a.js"><link rel="prefetch" href="/note-doc/assets/js/113.909155ce.js"><link rel="prefetch" href="/note-doc/assets/js/114.f1d9c373.js"><link rel="prefetch" href="/note-doc/assets/js/115.fd3459d9.js"><link rel="prefetch" href="/note-doc/assets/js/116.2ddd88ba.js"><link rel="prefetch" href="/note-doc/assets/js/117.e659164a.js"><link rel="prefetch" href="/note-doc/assets/js/118.5c10875e.js"><link rel="prefetch" href="/note-doc/assets/js/119.3d62f8a2.js"><link rel="prefetch" href="/note-doc/assets/js/12.c12df886.js"><link rel="prefetch" href="/note-doc/assets/js/120.44c7ce6b.js"><link rel="prefetch" href="/note-doc/assets/js/121.b26b2b20.js"><link rel="prefetch" href="/note-doc/assets/js/122.26f00a31.js"><link rel="prefetch" href="/note-doc/assets/js/123.300d72d9.js"><link rel="prefetch" href="/note-doc/assets/js/124.75cd28d7.js"><link rel="prefetch" href="/note-doc/assets/js/125.bd7db387.js"><link rel="prefetch" href="/note-doc/assets/js/126.e3f9929f.js"><link rel="prefetch" href="/note-doc/assets/js/127.08879315.js"><link rel="prefetch" href="/note-doc/assets/js/128.79bb7074.js"><link rel="prefetch" href="/note-doc/assets/js/129.173c51c7.js"><link rel="prefetch" href="/note-doc/assets/js/13.2c60da4a.js"><link rel="prefetch" href="/note-doc/assets/js/130.f8dfb4f6.js"><link rel="prefetch" href="/note-doc/assets/js/131.fca8a4e0.js"><link rel="prefetch" href="/note-doc/assets/js/132.784016d3.js"><link rel="prefetch" href="/note-doc/assets/js/133.fadb1d0e.js"><link rel="prefetch" href="/note-doc/assets/js/134.8721eff8.js"><link rel="prefetch" href="/note-doc/assets/js/135.d3e0983f.js"><link rel="prefetch" href="/note-doc/assets/js/136.3c755871.js"><link rel="prefetch" href="/note-doc/assets/js/137.2e01babc.js"><link rel="prefetch" href="/note-doc/assets/js/138.4c8942f0.js"><link rel="prefetch" href="/note-doc/assets/js/139.bc84f2c5.js"><link rel="prefetch" href="/note-doc/assets/js/14.832e5fff.js"><link rel="prefetch" href="/note-doc/assets/js/140.854a3328.js"><link rel="prefetch" href="/note-doc/assets/js/141.9b94e52a.js"><link rel="prefetch" href="/note-doc/assets/js/142.f85da0cf.js"><link rel="prefetch" href="/note-doc/assets/js/143.46643a74.js"><link rel="prefetch" href="/note-doc/assets/js/144.526e7efd.js"><link rel="prefetch" href="/note-doc/assets/js/145.a3d44211.js"><link rel="prefetch" href="/note-doc/assets/js/146.1a6257ec.js"><link rel="prefetch" href="/note-doc/assets/js/147.7675318b.js"><link rel="prefetch" href="/note-doc/assets/js/148.2e6a7309.js"><link rel="prefetch" href="/note-doc/assets/js/149.b7c2beb3.js"><link rel="prefetch" href="/note-doc/assets/js/15.0ae18e8f.js"><link rel="prefetch" href="/note-doc/assets/js/150.e1548ae9.js"><link rel="prefetch" href="/note-doc/assets/js/151.70484961.js"><link rel="prefetch" href="/note-doc/assets/js/152.b15d460d.js"><link rel="prefetch" href="/note-doc/assets/js/153.005375d7.js"><link rel="prefetch" href="/note-doc/assets/js/154.d0c98b1f.js"><link rel="prefetch" href="/note-doc/assets/js/155.7328fdcf.js"><link rel="prefetch" href="/note-doc/assets/js/156.b5037bbc.js"><link rel="prefetch" href="/note-doc/assets/js/157.66ffd46e.js"><link rel="prefetch" href="/note-doc/assets/js/158.3e79b208.js"><link rel="prefetch" href="/note-doc/assets/js/159.1af1288a.js"><link rel="prefetch" href="/note-doc/assets/js/16.9ba40f3c.js"><link rel="prefetch" href="/note-doc/assets/js/160.98b82053.js"><link rel="prefetch" href="/note-doc/assets/js/161.dbb23b15.js"><link rel="prefetch" href="/note-doc/assets/js/162.f78f58c2.js"><link rel="prefetch" href="/note-doc/assets/js/163.65310780.js"><link rel="prefetch" href="/note-doc/assets/js/164.7f727827.js"><link rel="prefetch" href="/note-doc/assets/js/165.63092dc9.js"><link rel="prefetch" href="/note-doc/assets/js/166.a3c41859.js"><link rel="prefetch" href="/note-doc/assets/js/167.782cad13.js"><link rel="prefetch" href="/note-doc/assets/js/168.47982a5a.js"><link rel="prefetch" href="/note-doc/assets/js/169.da48e784.js"><link rel="prefetch" href="/note-doc/assets/js/17.1860558b.js"><link rel="prefetch" href="/note-doc/assets/js/170.3bdf1345.js"><link rel="prefetch" href="/note-doc/assets/js/171.9537f05f.js"><link rel="prefetch" href="/note-doc/assets/js/172.d5fb90d3.js"><link rel="prefetch" href="/note-doc/assets/js/173.aeef50bf.js"><link rel="prefetch" href="/note-doc/assets/js/174.b2313146.js"><link rel="prefetch" href="/note-doc/assets/js/175.94f3fc77.js"><link rel="prefetch" href="/note-doc/assets/js/176.77b5f63c.js"><link rel="prefetch" href="/note-doc/assets/js/177.27dd9e40.js"><link rel="prefetch" href="/note-doc/assets/js/178.0aaf6791.js"><link rel="prefetch" href="/note-doc/assets/js/179.4460e7de.js"><link rel="prefetch" href="/note-doc/assets/js/18.9b0b2f8b.js"><link rel="prefetch" href="/note-doc/assets/js/180.710da4fa.js"><link rel="prefetch" href="/note-doc/assets/js/181.4d17712b.js"><link rel="prefetch" href="/note-doc/assets/js/182.26842501.js"><link rel="prefetch" href="/note-doc/assets/js/183.a7596a43.js"><link rel="prefetch" href="/note-doc/assets/js/184.57d017d4.js"><link rel="prefetch" href="/note-doc/assets/js/185.fc0fbe01.js"><link rel="prefetch" href="/note-doc/assets/js/186.26d91cdc.js"><link rel="prefetch" href="/note-doc/assets/js/187.2d91b9bc.js"><link rel="prefetch" href="/note-doc/assets/js/188.eebd57a0.js"><link rel="prefetch" href="/note-doc/assets/js/189.b3889e58.js"><link rel="prefetch" href="/note-doc/assets/js/19.3fd80d9f.js"><link rel="prefetch" href="/note-doc/assets/js/190.aafcea67.js"><link rel="prefetch" href="/note-doc/assets/js/191.3f110afc.js"><link rel="prefetch" href="/note-doc/assets/js/192.86afc19e.js"><link rel="prefetch" href="/note-doc/assets/js/193.b54f8f64.js"><link rel="prefetch" href="/note-doc/assets/js/194.4bcbb40d.js"><link rel="prefetch" href="/note-doc/assets/js/195.6135607b.js"><link rel="prefetch" href="/note-doc/assets/js/196.d9030c68.js"><link rel="prefetch" href="/note-doc/assets/js/197.5646c9ba.js"><link rel="prefetch" href="/note-doc/assets/js/198.cf3d02c6.js"><link rel="prefetch" href="/note-doc/assets/js/199.43c5b85f.js"><link rel="prefetch" href="/note-doc/assets/js/20.9eb3d60c.js"><link rel="prefetch" href="/note-doc/assets/js/200.843aa803.js"><link rel="prefetch" href="/note-doc/assets/js/201.51d52d1e.js"><link rel="prefetch" href="/note-doc/assets/js/202.6fe650ff.js"><link rel="prefetch" href="/note-doc/assets/js/203.e78af7ea.js"><link rel="prefetch" href="/note-doc/assets/js/204.c88e6e9b.js"><link rel="prefetch" href="/note-doc/assets/js/205.fd4b1455.js"><link rel="prefetch" href="/note-doc/assets/js/206.a74c0b9e.js"><link rel="prefetch" href="/note-doc/assets/js/207.f2c583d5.js"><link rel="prefetch" href="/note-doc/assets/js/208.685a1d56.js"><link rel="prefetch" href="/note-doc/assets/js/209.43764a0d.js"><link rel="prefetch" href="/note-doc/assets/js/21.d3202235.js"><link rel="prefetch" href="/note-doc/assets/js/210.92373eef.js"><link rel="prefetch" href="/note-doc/assets/js/211.4234e66a.js"><link rel="prefetch" href="/note-doc/assets/js/212.a32ea32f.js"><link rel="prefetch" href="/note-doc/assets/js/214.135cf65c.js"><link rel="prefetch" href="/note-doc/assets/js/215.a724528f.js"><link rel="prefetch" href="/note-doc/assets/js/216.e7cfb9da.js"><link rel="prefetch" href="/note-doc/assets/js/217.69a9b8b5.js"><link rel="prefetch" href="/note-doc/assets/js/218.c1182228.js"><link rel="prefetch" href="/note-doc/assets/js/219.cdc98bfd.js"><link rel="prefetch" href="/note-doc/assets/js/22.6ea51e22.js"><link rel="prefetch" href="/note-doc/assets/js/220.4d6d2804.js"><link rel="prefetch" href="/note-doc/assets/js/221.ee7602b2.js"><link rel="prefetch" href="/note-doc/assets/js/222.43bf963f.js"><link rel="prefetch" href="/note-doc/assets/js/223.0b430e81.js"><link rel="prefetch" href="/note-doc/assets/js/224.48a29322.js"><link rel="prefetch" href="/note-doc/assets/js/225.1a4f9f8b.js"><link rel="prefetch" href="/note-doc/assets/js/226.844ccdbd.js"><link rel="prefetch" href="/note-doc/assets/js/227.887e1890.js"><link rel="prefetch" href="/note-doc/assets/js/228.8b93b711.js"><link rel="prefetch" href="/note-doc/assets/js/229.ed576ea4.js"><link rel="prefetch" href="/note-doc/assets/js/23.c3a283df.js"><link rel="prefetch" href="/note-doc/assets/js/230.a4557880.js"><link rel="prefetch" href="/note-doc/assets/js/231.2753b14a.js"><link rel="prefetch" href="/note-doc/assets/js/232.184f34c0.js"><link rel="prefetch" href="/note-doc/assets/js/233.2430c062.js"><link rel="prefetch" href="/note-doc/assets/js/234.9ae0b676.js"><link rel="prefetch" href="/note-doc/assets/js/235.c965f1c9.js"><link rel="prefetch" href="/note-doc/assets/js/236.7327fc51.js"><link rel="prefetch" href="/note-doc/assets/js/237.75457360.js"><link rel="prefetch" href="/note-doc/assets/js/238.740bf921.js"><link rel="prefetch" href="/note-doc/assets/js/239.2bb9f6b8.js"><link rel="prefetch" href="/note-doc/assets/js/24.973d6289.js"><link rel="prefetch" href="/note-doc/assets/js/240.272d893e.js"><link rel="prefetch" href="/note-doc/assets/js/241.7e8b42c3.js"><link rel="prefetch" href="/note-doc/assets/js/242.8ebbd8a6.js"><link rel="prefetch" href="/note-doc/assets/js/243.17b7aaf2.js"><link rel="prefetch" href="/note-doc/assets/js/244.07864beb.js"><link rel="prefetch" href="/note-doc/assets/js/245.dc1732a0.js"><link rel="prefetch" href="/note-doc/assets/js/246.c90b9b07.js"><link rel="prefetch" href="/note-doc/assets/js/247.41a09d6f.js"><link rel="prefetch" href="/note-doc/assets/js/248.e2990a33.js"><link rel="prefetch" href="/note-doc/assets/js/249.810213a1.js"><link rel="prefetch" href="/note-doc/assets/js/25.9552261a.js"><link rel="prefetch" href="/note-doc/assets/js/250.bd134dae.js"><link rel="prefetch" href="/note-doc/assets/js/251.f863128d.js"><link rel="prefetch" href="/note-doc/assets/js/252.bf8647fe.js"><link rel="prefetch" href="/note-doc/assets/js/253.d382962b.js"><link rel="prefetch" href="/note-doc/assets/js/254.d62d430a.js"><link rel="prefetch" href="/note-doc/assets/js/255.dda088c4.js"><link rel="prefetch" href="/note-doc/assets/js/256.71cbd506.js"><link rel="prefetch" href="/note-doc/assets/js/257.72208a6a.js"><link rel="prefetch" href="/note-doc/assets/js/258.21ad5233.js"><link rel="prefetch" href="/note-doc/assets/js/259.c39a47e4.js"><link rel="prefetch" href="/note-doc/assets/js/26.5191e482.js"><link rel="prefetch" href="/note-doc/assets/js/260.3f4a32c3.js"><link rel="prefetch" href="/note-doc/assets/js/261.64f7c72b.js"><link rel="prefetch" href="/note-doc/assets/js/262.92e0da04.js"><link rel="prefetch" href="/note-doc/assets/js/263.e946604d.js"><link rel="prefetch" href="/note-doc/assets/js/264.cb739c7d.js"><link rel="prefetch" href="/note-doc/assets/js/265.c51a162c.js"><link rel="prefetch" href="/note-doc/assets/js/266.f019b03b.js"><link rel="prefetch" href="/note-doc/assets/js/267.dd4c1bde.js"><link rel="prefetch" href="/note-doc/assets/js/268.b6e1ceca.js"><link rel="prefetch" href="/note-doc/assets/js/269.14c4f48a.js"><link rel="prefetch" href="/note-doc/assets/js/27.267ea29d.js"><link rel="prefetch" href="/note-doc/assets/js/270.87483c85.js"><link rel="prefetch" href="/note-doc/assets/js/271.a693b0d4.js"><link rel="prefetch" href="/note-doc/assets/js/272.79454d5b.js"><link rel="prefetch" href="/note-doc/assets/js/273.261472a9.js"><link rel="prefetch" href="/note-doc/assets/js/274.4a57c230.js"><link rel="prefetch" href="/note-doc/assets/js/275.8b4ca58e.js"><link rel="prefetch" href="/note-doc/assets/js/276.0a219ccd.js"><link rel="prefetch" href="/note-doc/assets/js/277.21dbe71d.js"><link rel="prefetch" href="/note-doc/assets/js/278.5c60e6da.js"><link rel="prefetch" href="/note-doc/assets/js/279.da68c9dd.js"><link rel="prefetch" href="/note-doc/assets/js/28.4a260fbf.js"><link rel="prefetch" href="/note-doc/assets/js/280.47cca433.js"><link rel="prefetch" href="/note-doc/assets/js/281.38cc3554.js"><link rel="prefetch" href="/note-doc/assets/js/282.8f828678.js"><link rel="prefetch" href="/note-doc/assets/js/283.f115ab1a.js"><link rel="prefetch" href="/note-doc/assets/js/284.db8e0439.js"><link rel="prefetch" href="/note-doc/assets/js/285.8064d1d1.js"><link rel="prefetch" href="/note-doc/assets/js/286.ab214de2.js"><link rel="prefetch" href="/note-doc/assets/js/287.335a25b4.js"><link rel="prefetch" href="/note-doc/assets/js/288.c9bc8921.js"><link rel="prefetch" href="/note-doc/assets/js/289.389eb037.js"><link rel="prefetch" href="/note-doc/assets/js/29.b32b7da0.js"><link rel="prefetch" href="/note-doc/assets/js/290.71a935f1.js"><link rel="prefetch" href="/note-doc/assets/js/291.ca6561d3.js"><link rel="prefetch" href="/note-doc/assets/js/292.82f4fdca.js"><link rel="prefetch" href="/note-doc/assets/js/293.aba590e7.js"><link rel="prefetch" href="/note-doc/assets/js/294.5ac0c3ed.js"><link rel="prefetch" href="/note-doc/assets/js/295.f859aa98.js"><link rel="prefetch" href="/note-doc/assets/js/296.0f7a3f79.js"><link rel="prefetch" href="/note-doc/assets/js/297.37a31c18.js"><link rel="prefetch" href="/note-doc/assets/js/298.af2d4d5c.js"><link rel="prefetch" href="/note-doc/assets/js/299.1c8b5d93.js"><link rel="prefetch" href="/note-doc/assets/js/3.b56b3350.js"><link rel="prefetch" href="/note-doc/assets/js/30.8ebeaf3e.js"><link rel="prefetch" href="/note-doc/assets/js/300.95ce3dd3.js"><link rel="prefetch" href="/note-doc/assets/js/301.863b90b9.js"><link rel="prefetch" href="/note-doc/assets/js/302.0f2fbb3d.js"><link rel="prefetch" href="/note-doc/assets/js/303.56c82540.js"><link rel="prefetch" href="/note-doc/assets/js/304.231d7bb5.js"><link rel="prefetch" href="/note-doc/assets/js/305.997bd2cf.js"><link rel="prefetch" href="/note-doc/assets/js/306.79fcea77.js"><link rel="prefetch" href="/note-doc/assets/js/307.149e11c2.js"><link rel="prefetch" href="/note-doc/assets/js/308.1d340421.js"><link rel="prefetch" href="/note-doc/assets/js/309.9daaec86.js"><link rel="prefetch" href="/note-doc/assets/js/31.8ead04c6.js"><link rel="prefetch" href="/note-doc/assets/js/310.c92a73ad.js"><link rel="prefetch" href="/note-doc/assets/js/311.8f2b4079.js"><link rel="prefetch" href="/note-doc/assets/js/312.bc6a0de4.js"><link rel="prefetch" href="/note-doc/assets/js/313.44312ccb.js"><link rel="prefetch" href="/note-doc/assets/js/314.dbf6753b.js"><link rel="prefetch" href="/note-doc/assets/js/315.95ffd854.js"><link rel="prefetch" href="/note-doc/assets/js/316.b260bb25.js"><link rel="prefetch" href="/note-doc/assets/js/317.3bb8ff0c.js"><link rel="prefetch" href="/note-doc/assets/js/318.519255f2.js"><link rel="prefetch" href="/note-doc/assets/js/319.cca87595.js"><link rel="prefetch" href="/note-doc/assets/js/32.ac2b64f0.js"><link rel="prefetch" href="/note-doc/assets/js/320.d0a8ad3b.js"><link rel="prefetch" href="/note-doc/assets/js/321.a5ae4062.js"><link rel="prefetch" href="/note-doc/assets/js/322.e761af07.js"><link rel="prefetch" href="/note-doc/assets/js/323.f841d5b8.js"><link rel="prefetch" href="/note-doc/assets/js/324.b0511ec1.js"><link rel="prefetch" href="/note-doc/assets/js/325.8aaadcd1.js"><link rel="prefetch" href="/note-doc/assets/js/326.5590c8b8.js"><link rel="prefetch" href="/note-doc/assets/js/327.67a21f9b.js"><link rel="prefetch" href="/note-doc/assets/js/328.d79cc3a8.js"><link rel="prefetch" href="/note-doc/assets/js/329.3c6da537.js"><link rel="prefetch" href="/note-doc/assets/js/33.6966d67c.js"><link rel="prefetch" href="/note-doc/assets/js/330.46132a95.js"><link rel="prefetch" href="/note-doc/assets/js/331.65265d91.js"><link rel="prefetch" href="/note-doc/assets/js/332.bff03b55.js"><link rel="prefetch" href="/note-doc/assets/js/333.b36c9ce7.js"><link rel="prefetch" href="/note-doc/assets/js/334.0a6664d8.js"><link rel="prefetch" href="/note-doc/assets/js/335.79d2261a.js"><link rel="prefetch" href="/note-doc/assets/js/336.32e0521b.js"><link rel="prefetch" href="/note-doc/assets/js/337.38df87d9.js"><link rel="prefetch" href="/note-doc/assets/js/338.72f46d69.js"><link rel="prefetch" href="/note-doc/assets/js/339.d3698675.js"><link rel="prefetch" href="/note-doc/assets/js/34.df13985b.js"><link rel="prefetch" href="/note-doc/assets/js/340.6024981d.js"><link rel="prefetch" href="/note-doc/assets/js/341.7824900a.js"><link rel="prefetch" href="/note-doc/assets/js/342.49055f8a.js"><link rel="prefetch" href="/note-doc/assets/js/343.b3d0f386.js"><link rel="prefetch" href="/note-doc/assets/js/344.2a6c7a3b.js"><link rel="prefetch" href="/note-doc/assets/js/345.139b8eb8.js"><link rel="prefetch" href="/note-doc/assets/js/346.959d06c3.js"><link rel="prefetch" href="/note-doc/assets/js/347.ef941815.js"><link rel="prefetch" href="/note-doc/assets/js/348.d9158d1d.js"><link rel="prefetch" href="/note-doc/assets/js/349.181a78fb.js"><link rel="prefetch" href="/note-doc/assets/js/35.c81b82a9.js"><link rel="prefetch" href="/note-doc/assets/js/350.88817faf.js"><link rel="prefetch" href="/note-doc/assets/js/351.4a5daec5.js"><link rel="prefetch" href="/note-doc/assets/js/352.ed5eb728.js"><link rel="prefetch" href="/note-doc/assets/js/353.7bad473f.js"><link rel="prefetch" href="/note-doc/assets/js/354.05e82677.js"><link rel="prefetch" href="/note-doc/assets/js/355.1bf63d0b.js"><link rel="prefetch" href="/note-doc/assets/js/356.4d08d659.js"><link rel="prefetch" href="/note-doc/assets/js/357.8c4a8a16.js"><link rel="prefetch" href="/note-doc/assets/js/358.bf0ad691.js"><link rel="prefetch" href="/note-doc/assets/js/359.33831132.js"><link rel="prefetch" href="/note-doc/assets/js/36.9b796b42.js"><link rel="prefetch" href="/note-doc/assets/js/360.23374153.js"><link rel="prefetch" href="/note-doc/assets/js/361.847cb5cf.js"><link rel="prefetch" href="/note-doc/assets/js/362.fab3fcc8.js"><link rel="prefetch" href="/note-doc/assets/js/363.c601fba2.js"><link rel="prefetch" href="/note-doc/assets/js/364.70ef9f08.js"><link rel="prefetch" href="/note-doc/assets/js/365.fc7f9f93.js"><link rel="prefetch" href="/note-doc/assets/js/366.b3f7321e.js"><link rel="prefetch" href="/note-doc/assets/js/367.c31e45a3.js"><link rel="prefetch" href="/note-doc/assets/js/368.33a8b6aa.js"><link rel="prefetch" href="/note-doc/assets/js/369.86bb720f.js"><link rel="prefetch" href="/note-doc/assets/js/37.58efcbf6.js"><link rel="prefetch" href="/note-doc/assets/js/370.2e55bdc2.js"><link rel="prefetch" href="/note-doc/assets/js/371.87ebcee5.js"><link rel="prefetch" href="/note-doc/assets/js/38.28eb9a79.js"><link rel="prefetch" href="/note-doc/assets/js/39.2d6c3ece.js"><link rel="prefetch" href="/note-doc/assets/js/4.b4b049ae.js"><link rel="prefetch" href="/note-doc/assets/js/40.a09fe0b7.js"><link rel="prefetch" href="/note-doc/assets/js/41.8d386363.js"><link rel="prefetch" href="/note-doc/assets/js/42.4d4cb285.js"><link rel="prefetch" href="/note-doc/assets/js/43.0c7cb113.js"><link rel="prefetch" href="/note-doc/assets/js/44.7f957cea.js"><link rel="prefetch" href="/note-doc/assets/js/45.80da5177.js"><link rel="prefetch" href="/note-doc/assets/js/46.ff8710be.js"><link rel="prefetch" href="/note-doc/assets/js/47.f2c6a34b.js"><link rel="prefetch" href="/note-doc/assets/js/48.5b61e305.js"><link rel="prefetch" href="/note-doc/assets/js/49.ae3a3210.js"><link rel="prefetch" href="/note-doc/assets/js/5.9c16d105.js"><link rel="prefetch" href="/note-doc/assets/js/50.859bd017.js"><link rel="prefetch" href="/note-doc/assets/js/51.0777e19c.js"><link rel="prefetch" href="/note-doc/assets/js/52.625a2c1a.js"><link rel="prefetch" href="/note-doc/assets/js/53.ab97f1d9.js"><link rel="prefetch" href="/note-doc/assets/js/54.d010a997.js"><link rel="prefetch" href="/note-doc/assets/js/55.999c7b9a.js"><link rel="prefetch" href="/note-doc/assets/js/56.b97bf5bf.js"><link rel="prefetch" href="/note-doc/assets/js/57.fbc01ea4.js"><link rel="prefetch" href="/note-doc/assets/js/58.2331480a.js"><link rel="prefetch" href="/note-doc/assets/js/59.86fbc5f8.js"><link rel="prefetch" href="/note-doc/assets/js/6.d0fedae6.js"><link rel="prefetch" href="/note-doc/assets/js/60.0b2b4b17.js"><link rel="prefetch" href="/note-doc/assets/js/61.a9be54f2.js"><link rel="prefetch" href="/note-doc/assets/js/62.7f5b69ef.js"><link rel="prefetch" href="/note-doc/assets/js/63.2f1c19cb.js"><link rel="prefetch" href="/note-doc/assets/js/64.c89075bb.js"><link rel="prefetch" href="/note-doc/assets/js/65.16abfc9e.js"><link rel="prefetch" href="/note-doc/assets/js/66.1a4a9ec9.js"><link rel="prefetch" href="/note-doc/assets/js/67.9f78f47f.js"><link rel="prefetch" href="/note-doc/assets/js/68.9cd2f5d3.js"><link rel="prefetch" href="/note-doc/assets/js/69.fb0b87df.js"><link rel="prefetch" href="/note-doc/assets/js/7.a5ca7bbb.js"><link rel="prefetch" href="/note-doc/assets/js/70.9a4a7a07.js"><link rel="prefetch" href="/note-doc/assets/js/71.88e73139.js"><link rel="prefetch" href="/note-doc/assets/js/72.7946f760.js"><link rel="prefetch" href="/note-doc/assets/js/73.24c2da2a.js"><link rel="prefetch" href="/note-doc/assets/js/74.f03b8ff9.js"><link rel="prefetch" href="/note-doc/assets/js/75.71fec547.js"><link rel="prefetch" href="/note-doc/assets/js/76.de5ee764.js"><link rel="prefetch" href="/note-doc/assets/js/77.e7009e35.js"><link rel="prefetch" href="/note-doc/assets/js/78.cf9c4511.js"><link rel="prefetch" href="/note-doc/assets/js/79.673f13e2.js"><link rel="prefetch" href="/note-doc/assets/js/8.4a23a032.js"><link rel="prefetch" href="/note-doc/assets/js/80.355228b0.js"><link rel="prefetch" href="/note-doc/assets/js/81.c0799647.js"><link rel="prefetch" href="/note-doc/assets/js/82.a9488a13.js"><link rel="prefetch" href="/note-doc/assets/js/83.9968e826.js"><link rel="prefetch" href="/note-doc/assets/js/84.5c3ca3ec.js"><link rel="prefetch" href="/note-doc/assets/js/85.cff98e86.js"><link rel="prefetch" href="/note-doc/assets/js/86.9cb78ba0.js"><link rel="prefetch" href="/note-doc/assets/js/87.0c7a8f9e.js"><link rel="prefetch" href="/note-doc/assets/js/88.a038b507.js"><link rel="prefetch" href="/note-doc/assets/js/89.4a9ccfe8.js"><link rel="prefetch" href="/note-doc/assets/js/9.3a89bc02.js"><link rel="prefetch" href="/note-doc/assets/js/90.342409fd.js"><link rel="prefetch" href="/note-doc/assets/js/91.88deae66.js"><link rel="prefetch" href="/note-doc/assets/js/92.32eaffeb.js"><link rel="prefetch" href="/note-doc/assets/js/93.f12ebb1d.js"><link rel="prefetch" href="/note-doc/assets/js/94.eea3a9f7.js"><link rel="prefetch" href="/note-doc/assets/js/95.bba2f83c.js"><link rel="prefetch" href="/note-doc/assets/js/96.58594290.js"><link rel="prefetch" href="/note-doc/assets/js/97.993a7849.js"><link rel="prefetch" href="/note-doc/assets/js/98.0db77fb0.js"><link rel="prefetch" href="/note-doc/assets/js/99.b185a1c9.js">
    <link rel="stylesheet" href="/note-doc/assets/css/0.styles.e218e477.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-doc/" class="home-link router-link-active"><img src="/note-doc/img/logo.png" alt="X_SaaS快速开发平台" class="logo"> <span class="site-name can-hide">X_SaaS快速开发平台</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-doc/dev/" class="nav-link">开发指南</a></div><div class="nav-item"><a href="/note-doc/operate/" class="nav-link">操作手册</a></div><div class="nav-item"><a href="/note-doc/dev-rule/" class="nav-link">开发规范</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><a href="/note-doc/web/" class="link-title">笔记</a> <span class="title" style="display:none;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-doc/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>页面</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-doc/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-doc/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li><li class="dropdown-item"><h4>技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-doc/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/note-doc/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-doc/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/note-doc/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li></ul></div></div><div class="nav-item"><a href="/note-doc/about/" class="nav-link">关于</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/note-doc/dev/" class="nav-link">开发指南</a></div><div class="nav-item"><a href="/note-doc/operate/" class="nav-link">操作手册</a></div><div class="nav-item"><a href="/note-doc/dev-rule/" class="nav-link">开发规范</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><a href="/note-doc/web/" class="link-title">笔记</a> <span class="title" style="display:none;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-doc/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>页面</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-doc/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-doc/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note-doc/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li><li class="dropdown-item"><h4>技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-doc/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-subitem"><a href="/note-doc/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/note-doc/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-doc/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/note-doc/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li></ul></div></div><div class="nav-item"><a href="/note-doc/about/" class="nav-link">关于</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>项目手册</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>开发指南</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>快速入门</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note-doc/dev/qs/" class="sidebar-link">简介</a></li><li><a href="/note-doc/pages/6434b7/" class="sidebar-link">技术架构</a></li><li><a href="/note-doc/dev/qs/skill/" class="sidebar-link">技术选型</a></li><li><a href="/note-doc/dev/qs/project-intro/" class="sidebar-link">项目结构</a></li><li><a href="/note-doc/dev/qs/feature/" class="sidebar-link">功能列表</a></li><li><a href="/note-doc/pages/a3b24a/" class="sidebar-link">快速启动</a></li><li><a href="/note-doc/pages/11b995/" class="sidebar-link">一键克隆</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>微服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>后端手册</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>前端手册Vue2</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>前端手册Vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>运维手册</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>大屏手册</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>更新日志</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>操作指南</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发规范</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/note-doc/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/note-doc/categories/?category=%E6%96%87%E6%A1%A3%E6%89%8B%E5%86%8C" title="分类" data-v-06225672>文档手册</a></li><li data-v-06225672><a href="/note-doc/categories/?category=springCloud%E5%AD%A6%E4%B9%A0" title="分类" data-v-06225672>springCloud学习</a></li><li data-v-06225672><a href="/note-doc/categories/?category=Gateway%E7%BD%91%E5%85%B3" title="分类" data-v-06225672>Gateway网关</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/simpleguan" target="_blank" title="作者" class="beLink" data-v-06225672>fortune</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-23</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">SpringCloudGateway内置的全局过滤器<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="spring-cloud-gateway-内置的全局过滤器-global-filters"><a href="#spring-cloud-gateway-内置的全局过滤器-global-filters" class="header-anchor">#</a> Spring Cloud Gateway 内置的全局过滤器（Global Filters）</h1> <p>本文基于 Spring Cloud Greenwich SR2</p> <p>原文链接：https://www.jianshu.com/p/3ab97acf1e69</p> <p>这里将 Spring Cloud Gateway 内置的所有全局过滤器简单整理成了一张表格，用作速览：</p> <table><thead><tr><th>全局过滤器</th> <th>作用</th></tr></thead> <tbody><tr><td>Forward Routing Filter</td> <td>用于本地 forward，也就是将请求在 Gateway 服务内进行转发，而不是转发到下游服务</td></tr> <tr><td>LoadBalancerClient Filter</td> <td>整合 Ribbon 实现负载均衡</td></tr> <tr><td>Netty Routing Filter</td> <td>使用 Netty 的 <code>HttpClient</code> 转发 http、https 请求</td></tr> <tr><td>Netty Write Response Filter</td> <td>将代理响应写回网关的客户端侧</td></tr> <tr><td>RouteToRequestUrl Filter</td> <td>将从 request 里获取的原始 url 转换成 Gateway 进行请求转发时所使用的 url</td></tr> <tr><td>Websocket Routing Filter</td> <td>使用 Spring Web Socket 将转发 Websocket 请求</td></tr> <tr><td>Gateway Metrics Filter</td> <td>整合监控相关，提供监控指标</td></tr></tbody></table> <h3 id="_1、combined-global-filter-and-gatewayfilter-ordering"><a href="#_1、combined-global-filter-and-gatewayfilter-ordering" class="header-anchor">#</a> 1、Combined Global Filter and GatewayFilter Ordering</h3> <p>当 Gateway 接收到请求时，Filtering Web Handler 处理器会将所有的 <code>GlobalFilter</code> 实例以及所有路由上所配置的 <code>GatewayFilter</code> 实例添加到一条过滤器链中。该过滤器链里的所有过滤器都会按照 <code>org.springframework.core.Ordered</code> 注解所指定的数字大小进行排序。</p> <p>Spring Cloud Gateway 区分了过滤器逻辑执行的 ”pre” 和 ”post” 阶段，所以优先级高的过滤器将会在 “pre” 阶段最先执行，优先级最低的过滤器则在 “post” 阶段最后执行。</p> <p>**Tips：**数字越小越靠前执行，记得这一点就 OK 了</p> <p>代码示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Bean
@Order(-1)
public GlobalFilter a() {
    return (exchange, chain) -&gt; {
        log.info(&quot;first pre filter&quot;);
        return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; {
            log.info(&quot;third post filter&quot;);
        }));
    };
}

@Bean
@Order(0)
public GlobalFilter b() {
    return (exchange, chain) -&gt; {
        log.info(&quot;second pre filter&quot;);
        return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; {
            log.info(&quot;second post filter&quot;);
        }));
    };
}

@Bean
@Order(1)
public GlobalFilter c() {
    return (exchange, chain) -&gt; {
        log.info(&quot;third pre filter&quot;);
        return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; {
            log.info(&quot;first post filter&quot;);
        }));
    };
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>执行结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>first pre filter
second pre filter
third pre filter
first post filter
second post filter
third post filter
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2、forward-routing-filter"><a href="#_2、forward-routing-filter" class="header-anchor">#</a> 2、Forward Routing Filter</h3> <p>简单来说这个 Filter 是用来做本地 forward 的，将官方文档的描述翻译后大致如下：</p> <p>当请求进来时，<code>ForwardRoutingFilter</code> 会查看一个 URL，该 URL 为 exchange 属性 <code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code> 的值，如果该 url 的 scheme 是 <code>forward</code>（例如：<code>forward://localendpoint</code>），那么该 Filter 会使用 Spirng 的 <code>DispatcherHandler</code> 来处理这个请求。该请求的 URL 路径部分，会被 forward URL 中的路径覆盖掉。而未修改过的原始 URL，会被追加到 <code>ServerWebExchangeUtils.GATEWAY_ORIGINAL_REQUEST_URL_ATTR</code> 属性中</p> <p>注：所谓 url scheme 简单来说就是 url 中的协议部分，例如 http、https、ws 等。自定义的 scheme 通常用于标识该 url 的行为，例如 app 开发中通常使用 url scheme 来跳转页面</p> <p><strong>Tips：</strong></p> <ul><li>这段文档实际上是描述了该 Filter 的实现原理，对使用者来说意义不大，对实现原理感兴趣的话可以直接查看源码，源码比文档描述好理解：<code>org.springframework.cloud.gateway.filter.ForwardRoutingFilter</code></li></ul> <h3 id="_3、loadbalancerclient-filter"><a href="#_3、loadbalancerclient-filter" class="header-anchor">#</a> 3、LoadBalancerClient Filter</h3> <p>这个 Filter 是用来整合 Ribbon 的，其核心就是解析 scheme 为<code>lb</code>的 url，以此获取微服务的名称，然后再通过 Ribbon 获取实际的调用地址。将官方文档的描述翻译后大致如下：</p> <p>当请求进来时，<code>LoadBalancerClientFilter</code> 会查看一个 URL，该 URL 为 exchange 的属性 <code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code> 的值，如果该 url 的 scheme 是 <code>lb</code>，（例如：<code>lb://myservice</code> ），那么该 Filter 会使用 Spring Cloud 的 <code>LoadBalancerClient</code> 来将 <code>myservice</code> 解析成实际的 host 和 port ，并替换掉原本 <code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code> 属性的值。而原始 url 会追加到 <code>ServerWebExchangeUtils.GATEWAY_ORIGINAL_REQUEST_URL_ATTR</code> 属性中。该过滤器还会查看 <code>ServerWebExchangeUtils.GATEWAY_SCHEME_PREFIX_ATTR</code> 属性，如果发现该属性的值是 <code>lb</code> ，也会执行相同逻辑。</p> <p>配置示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  cloud:
    gateway:
      routes:
      - id: myRoute
        uri: lb://service
        predicates:
        - Path=/service/**
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>默认情况下，如果无法通过 <code>LoadBalancer</code> 找到指定服务的实例，那么会返回 503（如上配置示例， 若 <code>LoadBalancer</code> 找不到名为 service 的实例时，就会返回 503）；可使用配置： <code>spring.cloud.gateway.loadbalancer.use404=true</code> ，让其返回 404。</p> <p><code>LoadBalancer</code> 返回的 <code>ServiceInstance</code> 的 <code>isSecure</code> 的值，会覆盖请求的 scheme。举个例子，如果请求打到 Gateway 上使用的是 HTTPS ，但 <code>ServiceInstance</code> 的 <code>isSecure</code> 是<code>false</code>，那么下游微服务接收到的则是 HTTP 请求，反之亦然。另外，如果该路由指定了 <code>GATEWAY_SCHEME_PREFIX_ATTR</code> 属性，那么前缀将会被剥离，并且路由 URL 中的 scheme 会覆盖 <code>ServiceInstance</code> 的配置</p> <p><strong>Tips：</strong></p> <ul><li>这段文档实际上是描述了该 Filter 的实现原理，对使用者来说意义不大，对实现原理感兴趣的话可以直接查看源码，源码比文档描述好理解：<code>org.springframework.cloud.gateway.filter.LoadBalancerClientFilter</code></li></ul> <h3 id="_4、netty-routing-filter"><a href="#_4、netty-routing-filter" class="header-anchor">#</a> 4、Netty Routing Filter</h3> <p>当请求进来时，<code>NettyRoutingFilter</code> 会查看一个 URL，该 URL 是 exchange 的属性 <code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code> 的值，如果该 url 的 scheme 是 <code>http</code> 或 <code>https</code> ，那么该 Filter 会使用 Netty 的 <code>HttpClient</code> 向下游的服务发送代理请求。获得的响应将放在 exchange 的 <code>ServerWebExchangeUtils.CLIENT_RESPONSE_ATTR</code> 属性中，以便在后面的 Filter 里使用。（有一个实验性的过滤器： <code>WebClientHttpRoutingFilter</code> 可实现相同功能，但无需 Netty）</p> <h3 id="_5、netty-write-response-filter"><a href="#_5、netty-write-response-filter" class="header-anchor">#</a> 5、Netty Write Response Filter</h3> <p><code>NettyWriteResponseFilter</code> 用于将代理响应写回网关的客户端侧，所以该过滤器会在所有其他过滤器执行完成后才执行，并且执行的条件是 exchange 中 <code>ServerWebExchangeUtils.CLIENT_RESPONSE_CONN_ATTR</code> 属性的值不为空，该值为 Netty 的 <code>Connection</code> 实例。（有一个实验性的过滤器： <code>WebClientWriteResponseFilter</code> 可实现相同功能，但无需 Netty）</p> <h3 id="_6、routetorequesturl-filter"><a href="#_6、routetorequesturl-filter" class="header-anchor">#</a> 6、RouteToRequestUrl Filter</h3> <p>这个过滤器用于将从 request 里获取的原始 url 转换成 Gateway 进行请求转发时所使用的 url。当请求进来时，<code>RouteToRequestUrlFilter</code> 会从 exchange 中获取 <code>ServerWebExchangeUtils.GATEWAY_ROUTE_ATTR</code> 属性的值，该值是一个 <code>Route</code> 对象。若该对象不为空的话，<code>RouteToRequestUrlFilter</code> 会基于请求 URL 及 <code>Route</code> 对象里的 URL 来创建一个新的 URL。新 URL 会被放到 exchange 的 <code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code> 属性中。</p> <p>可能有点抽象，我们 debug 一下，看看这三个 url 的值就明白了，如下图：</p> <p><img src="http://cdn.jayh.club/uPic/19037705-c26520b6707d811bMcBvAK.png" alt="img"></p> <p>image.png</p> <p>如果 URL 具有 scheme 前缀，例如 <code>lb:ws://serviceid</code> ，该 <code>lb</code> scheme 将从 URL 中剥离，并放到 <code>ServerWebExchangeUtils.GATEWAY_SCHEME_PREFIX_ATTR</code> 中，方便后面的过滤器使用。</p> <h3 id="_7、websocket-routing-filter"><a href="#_7、websocket-routing-filter" class="header-anchor">#</a> 7、Websocket Routing Filter</h3> <p>该过滤器的作用与 <code>NettyRoutingFilter</code> 类似。当请求进来时，<code>WebsocketRoutingFilter</code> 会查看一个 URL，该 URL 是 exchange 中 <code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code> 属性的值，如果该 url 的 scheme 是 <code>ws</code> 或者 <code>wss</code>，那么该 Filter 会使用 Spring Web Socket 将 Websocket 请求转发到下游。</p> <p>另外，如果 Websocket 请求需要负载均衡的话，可为 URL 添加 <code>lb</code> 前缀以实现负载均衡，例如 <code>lb:ws://serviceid</code> 。</p> <p>如果你使用 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fsockjs" target="_blank" rel="noopener noreferrer">SockJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 作为普通 http 的后备，则应配置正常的 HTTP 路由以及 Websocket 路由。</p> <p>配置示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  cloud:
    gateway:
      routes:
      # SockJS route
      - id: websocket_sockjs_route
        uri: http://localhost:3001
        predicates:
        - Path=/websocket/info/**
      # Normwal Websocket route
      - id: websocket_route
        uri: ws://localhost:3001
        predicates:
        - Path=/websocket/**
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_8、gateway-metrics-filter"><a href="#_8、gateway-metrics-filter" class="header-anchor">#</a> 8、Gateway Metrics Filter</h3> <p>想要启用 Gateway Metrics Filter，需在项目中添加 <code>spring-boot-starter-actuator</code> 依赖，然后在配置文件中配置 <code>spring.cloud.gateway.metrics.enabled</code> 的值为<code>true</code>。该过滤器会添加名为 <code>gateway.requests</code> 的时序度量（timer metric），其中包含以下标记：</p> <ul><li><code>routeId</code>：路由 ID</li> <li><code>routeUri</code>：API 将路由到的 URI</li> <li><code>outcome</code>：由 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2Fcurrent%2Fjavadoc-api%2Forg%2Fspringframework%2Fhttp%2FHttpStatus.Series.html" target="_blank" rel="noopener noreferrer">HttpStatus.Series<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 分类</li> <li><code>status</code>：返回给客户端的 Http Status</li> <li><code>httpStatusCode</code>：返回给客户端的请求的 Http Status</li> <li><code>httpMethod</code>：请求所使用的 Http 方法</li></ul> <p>这些指标暴露在 <code>/actuator/metrics/gateway.requests</code> 端点中，并且可以轻松与 Prometheus 整合，从而创建一个 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fcloud.spring.io%2Fspring-cloud-gateway%2Freference%2Fhtml%2Fgateway-grafana-dashboard.json" target="_blank" rel="noopener noreferrer">Grafana dashboard<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>注：Prometheus 是一款监控工具，Grafana 是一款监控可视化工具；Spring Boot Actuator 可与这两款工具进行整合。</p> <h3 id="_9、marking-an-exchange-as-routed"><a href="#_9、marking-an-exchange-as-routed" class="header-anchor">#</a> 9、Marking An Exchange As Routed</h3> <p>当一个请求走完整条过滤器链后，负责转发请求到下游的那个过滤器会在 exchange 中添加一个 <code>gatewayAlreadyRouted</code> 属性，从而将 exchange 标记为 <code>routed</code>（已路由）。一旦请求被标记为 <code>routed</code> ，其他路由过滤器将不会再次路由该请求，而是直接跳过。</p> <p>了解了以上所有内置的全局过滤器后，我们知道不同协议的请求会由不同的过滤器转发到下游。所以负责添加这个<code>gatewayAlreadyRouted</code> 属性的过滤器就是最终负责转发请求的过滤器：</p> <ul><li>http、https 请求会由<code>NettyRoutingFilter</code>或<code>WebClientHttpRoutingFilter</code>添加这个属性</li> <li>forward 请求会由<code>ForwardRoutingFilter</code>添加这个属性</li> <li>websocket 请求会由<code>WebsocketRoutingFilter</code>添加这个属性</li></ul> <p>这些过滤器调用了以下方法将 exchange 标记为 <code>routed</code> ，或检查 exchange 是否是 <code>routed</code>：</p> <ul><li><code>ServerWebExchangeUtils.isAlreadyRouted</code>：检查 exchange 是否为 routed 状态</li> <li><code>ServerWebExchangeUtils.setAlreadyRouted</code>：将 exchange 设置为 routed 状态</li></ul> <p>简单来说，就是 Gateway 通过 <code>gatewayAlreadyRouted</code> 属性表示这个请求已经转发过了，而无需其他过滤器重复路由，从而防止重复的路由转发。</p> <p>这些全局过滤器都有对应的配置类，感兴趣的话可以查看相关源码：</p> <ul><li><code>org.springframework.cloud.gateway.config.GatewayAutoConfiguration</code></li> <li><code>org.springframework.cloud.gateway.config.GatewayMetricsAutoConfiguration</code></li> <li><code>org.springframework.cloud.gateway.config.GatewayLoadBalancerClientAutoConfiguration</code></li></ul> <p>官方文档：</p> <ul><li><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fcloud.spring.io%2Fspring-cloud-static%2FGreenwich.SR2%2Fsingle%2Fspring-cloud.html%23_global_filters" target="_blank" rel="noopener noreferrer">Global Filters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div>  <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/note-doc/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/note-doc/pages/1e8031/"><div>
            kubeSphere【推荐】
            <!----></div></a> <span class="date">02-18</span></dt></dl><dl><dd>02</dd> <dt><a href="/note-doc/pages/13a3cf/"><div>
            k8s 部署
            <!----></div></a> <span class="date">02-18</span></dt></dl><dl><dd>03</dd> <dt><a href="/note-doc/dev/server/saas-tenant/"><div>
            多租户模式
            <!----></div></a> <span class="date">02-18</span></dt></dl> <dl><dd></dd> <dt><a href="/note-doc/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>Evan Xu | <a href="https://github.com/simpleguan/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/note-doc/assets/js/app.3086d7cc.js" defer></script><script src="/note-doc/assets/js/2.d14532d0.js" defer></script><script src="/note-doc/assets/js/213.fb3e37df.js" defer></script>
  </body>
</html>
